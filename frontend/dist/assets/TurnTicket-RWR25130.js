import{y as p,e as n,f as e,x as c,w as g,g as h,h as d,F as f,p as b,l as a,i as u,v,d as m,s as l,n as k}from"./index-D1dayd5A.js";const _={name:"TurnTicket",data(){return{areas:[],form:{codigo_area:"",dni_usuario:"",nombre_usuario:"",motivo:"",created_by:"TOTEM"},errors:{},loading:!1,generatedTurn:null,currentTime:""}},mounted(){this.fetchAreas(),this.updateTime(),setInterval(this.updateTime,1e3)},methods:{async fetchAreas(){try{const r=await m.get("/turn/areas");r.data.success&&(this.areas=r.data.areas)}catch(r){console.error("Error fetching areas:",r)}},selectArea(r){this.form.codigo_area=r.codigo,this.errors.codigo_area=""},validateForm(){return this.errors={},this.form.codigo_area?!0:(this.errors.codigo_area="Debe seleccionar un área",!1)},async generateTurn(){if(this.validateForm()){this.loading=!0;try{const r=await m.post("/turn/create",this.form);r.data.success?this.generatedTurn=r.data.turno:alert(r.data.error||"Error al generar el turno")}catch(r){console.error("Error generating turn:",r),alert("Error al conectar con el servidor")}finally{this.loading=!1}}},formatDate(r){return r?new Date(r+"T00:00:00").toLocaleDateString("es-PE",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):""},printTicket(){window.print()},resetForm(){this.form={codigo_area:"",dni_usuario:"",nombre_usuario:"",motivo:"",created_by:"TOTEM"},this.generatedTurn=null,this.errors={}},updateTime(){this.currentTime=new Date().toLocaleTimeString("es-PE")}}},y={class:"turn-ticket-page"},x={class:"ticket-container"},T={class:"ticket-main"},w={key:0,class:"form-section"},C={class:"form-group area-selection"},M={class:"areas-grid"},D=["onClick"],B={class:"area-prefix"},E={class:"area-name"},N={key:0,class:"error-message"},F={class:"optional-data"},I={class:"form-row"},S={class:"form-group"},V={class:"form-group"},A={class:"form-group"},H=["disabled"],O={key:0,class:"spinner",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},U={key:1,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},z={key:1,class:"ticket-section"},L={class:"ticket-display"},G={class:"ticket-number"},j={class:"ticket-area"},q={class:"ticket-datetime"},P={class:"ticket-date"},R={class:"ticket-time"},Y={class:"queue-position"},J={class:"position-number"},K={class:"ticket-actions"},Q={class:"ticket-footer"},W={class:"footer-time"};function X(r,t,Z,$,s,i){return l(),n("div",y,[e("div",x,[t[19]||(t[19]=c('<header class="ticket-header" data-v-0172ba66><div class="dre-logo" data-v-0172ba66><div class="logo-icon" data-v-0172ba66><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-0172ba66><path d="M12 14l9-5-9-5-9 5 9 5z" data-v-0172ba66></path><path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" data-v-0172ba66></path><path d="M12 14v7" data-v-0172ba66></path></svg></div><div class="logo-text" data-v-0172ba66><h1 data-v-0172ba66>DRE HUÁNUCO</h1><p data-v-0172ba66>Sistema de Turnos</p></div></div></header>',1)),e("main",T,[s.generatedTurn?(l(),n("div",z,[t[17]||(t[17]=c('<div class="ticket-success" data-v-0172ba66><div class="success-icon" data-v-0172ba66><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-0172ba66><circle cx="12" cy="12" r="10" data-v-0172ba66></circle><path d="M9 12l2 2 4-4" data-v-0172ba66></path></svg></div><h2 data-v-0172ba66>¡Turno Generado Exitosamente!</h2></div>',1)),e("div",L,[e("div",G,a(s.generatedTurn.numero_turno),1),e("div",j,a(s.generatedTurn.nombre_area),1),e("div",q,[e("span",P,a(i.formatDate(s.generatedTurn.fecha)),1),e("span",R,a(s.generatedTurn.hora),1)]),e("div",Y,[t[14]||(t[14]=e("span",{class:"position-label"},"Su posición en la cola:",-1)),e("span",J,a(s.generatedTurn.posicion_cola),1)])]),t[18]||(t[18]=e("div",{class:"ticket-instructions"},[e("h3",null,"Instrucciones:"),e("ol",null,[e("li",null,"Espere en la sala de espera hasta que su turno sea llamado."),e("li",null,"Esté atento a la pantalla donde se mostrará su número."),e("li",null,"Cuando vea su número, diríjase a la ventanilla indicada."),e("li",null,"Tenga sus documentos listos para ser atendido.")])],-1)),e("div",K,[e("button",{class:"print-btn",onClick:t[4]||(t[4]=(...o)=>i.printTicket&&i.printTicket(...o))},[...t[15]||(t[15]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"6,9 6,2 18,2 18,9"}),e("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),e("rect",{x:"6",y:"14",width:"12",height:"8"})],-1),d(" Imprimir Ticket ",-1)])]),e("button",{class:"new-btn",onClick:t[5]||(t[5]=(...o)=>i.resetForm&&i.resetForm(...o))},[...t[16]||(t[16]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14M5 12h14"})],-1),d(" Nuevo Turno ",-1)])])])])):(l(),n("div",w,[t[13]||(t[13]=c('<h2 class="form-title" data-v-0172ba66><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-0172ba66><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-0172ba66></rect><line x1="16" y1="2" x2="16" y2="6" data-v-0172ba66></line><line x1="8" y1="2" x2="8" y2="6" data-v-0172ba66></line><line x1="3" y1="10" x2="21" y2="10" data-v-0172ba66></line></svg> Obtener Turno de Atención </h2><p class="form-description" data-v-0172ba66> Seleccione el área donde desea ser atendido y complete sus datos para generar su turno. </p>',2)),e("form",{onSubmit:t[3]||(t[3]=g((...o)=>i.generateTurn&&i.generateTurn(...o),["prevent"])),class:"turn-form"},[e("div",C,[t[6]||(t[6]=e("label",{class:"form-label"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e("polyline",{points:"9,22 9,12 15,12 15,22"})]),d(" Seleccione el Área * ")],-1)),e("div",M,[(l(!0),n(f,null,b(s.areas,o=>(l(),n("button",{key:o.codigo,type:"button",class:k(["area-card",{selected:s.form.codigo_area===o.codigo}]),onClick:ee=>i.selectArea(o)},[e("span",B,a(o.prefijo),1),e("span",E,a(o.nombre),1)],10,D))),128))]),s.errors.codigo_area?(l(),n("span",N,a(s.errors.codigo_area),1)):h("",!0)]),e("div",F,[t[10]||(t[10]=e("h3",{class:"optional-title"},"Datos Opcionales",-1)),e("div",I,[e("div",S,[t[7]||(t[7]=e("label",{class:"form-label"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2"}),e("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]),d(" DNI ")],-1)),u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.form.dni_usuario=o),type:"text",class:"form-input",placeholder:"Ingrese su DNI",maxlength:"8"},null,512),[[v,s.form.dni_usuario]])]),e("div",V,[t[8]||(t[8]=e("label",{class:"form-label"},[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})]),d(" Nombre ")],-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.form.nombre_usuario=o),type:"text",class:"form-input",placeholder:"Ingrese su nombre"},null,512),[[v,s.form.nombre_usuario]])])]),e("div",A,[t[9]||(t[9]=c('<label class="form-label" data-v-0172ba66><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-0172ba66><line x1="21" y1="10" x2="3" y2="10" data-v-0172ba66></line><line x1="21" y1="6" x2="3" y2="6" data-v-0172ba66></line><line x1="21" y1="14" x2="3" y2="14" data-v-0172ba66></line><line x1="21" y1="18" x2="3" y2="18" data-v-0172ba66></line></svg> Motivo de la visita </label>',1)),u(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.form.motivo=o),class:"form-textarea",rows:"2",placeholder:"Describa brevemente el motivo de su visita"},null,512),[[v,s.form.motivo]])])]),e("button",{type:"submit",class:"submit-btn",disabled:s.loading},[s.loading?(l(),n("svg",O,[...t[11]||(t[11]=[e("circle",{cx:"12",cy:"12",r:"10","stroke-dasharray":"32","stroke-dashoffset":"8"},null,-1)])])):(l(),n("svg",U,[...t[12]||(t[12]=[e("polyline",{points:"9,11 12,14 22,4"},null,-1),e("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"},null,-1)])])),d(" "+a(s.loading?"Generando...":"Generar Mi Turno"),1)],8,H)],32)]))]),e("footer",Q,[e("p",null,"© "+a(new Date().getFullYear())+" Dirección Regional de Educación Huánuco",1),e("p",W,a(s.currentTime),1)])])])}const se=p(_,[["render",X],["__scopeId","data-v-0172ba66"]]);export{se as default};
